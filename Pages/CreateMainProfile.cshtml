@page
@model SCCPP1.Pages.CreateMainProfileModel
@{
    ViewData["Title"] = "Create Main Profile";
}

<!-- This page is used to create the user's profile. Will only be seen once upon inital login. -->
<style>
    body {
        font-family: Arial, Helvetica, sans-serif;
    }

    * {
        box-sizing: border-box;
    }

    input[type=text], select, textarea {
        width: 100%;
        padding: 12px;
        border: 1px solid #000000;
        border-radius: 4px;
        box-sizing: border-box;
        margin-top: 6px;
        margin-bottom: 16px;
        resize: vertical;
    }

    label > .required {
        color: red;
        display: none;
    }

    input:required + label > .required {
        display: inline;
    }

    /* Div class styling for tag system*/
    .tags-input {
        width: 100%;
        padding: 12px;
        border: 1px solid #000000;
        border-radius: 4px;
        box-sizing: border-box;
        margin-top: 6px;
        margin-bottom: 16px;
        resize: vertical;
    }

        .tags-input input {
            border: 1px solid #000000;
            outline: none;
            width: 100%;
        }

    .tags-list {
        margin: 0;
        padding: 0;
        list-style: none;
        display: flex;
        flex-wrap: wrap;
    }

    .tag {
        background-color: #f2f2f2;
        padding: 5px;
        border-radius: 5px;
        margin-right: 5px;
        margin-bottom: 5px;
        display: flex;
        align-items: center;
    }

        .tag span {
            margin-left: 5px;
            margin-right: 5px;
        }

        .tag i {
            cursor: pointer;
        }

    /* Submit button styling*/
    input[type=submit] {
        background-color: white;
        color: #0062F3;
        padding: 12px 20px;
        border: 1px solid #0062F3;
        border-radius: 4px;
        cursor: pointer;
    }

        input[type=submit]:hover {
            background-color: #0062F3;
            color: white;
            border: 1px solid #0062F3;
        }

    .profile {
        border-radius: 5px;
        background-color: white;
        padding: 20px;
    }

    #experience-list ul {
        list-style: none;
        margin: 0;
        padding: 0;
    }

    #experience-list li {
        margin: 10px;
        padding: 10px;
        border: 1px solid black;
    }
</style>

<body>
    <h1>Create Your Main Profile</h1>
    <br />
    <div class="profile">
        <form method="post" id="myForm">
            <legend><b>About:</b></legend>

            <label for="FirstName">First Name:*</label>
            <input type="text" asp-for="Colleague!.FirstName" placeholder="Ex. John" required />
            <br />

            <label for="LastName">Last Name:*</label>
            <input type="text" asp-for="Colleague!.LastName" placeholder="Ex. Doe" required />
            <br />

            <label for="MiddleName">Middle Name:</label>
            <input type="text" asp-for="Colleague!.MiddleName" placeholder="Ex. Bob" />
            <br />

            <label for="PhoneNumber">Phone:*</label>
            <input type="tel" asp-for="Colleague!.PhoneNumber" placeholder="Ex. (987)-654-3210" required />
            <br />
            <br />

            <label for="EmailAddress">Email Address:*</label>
            <input type="email" asp-for="Colleague!.EmailAddress" placeholder="Ex. jdoe@example.com" required />
            <br />
            <br />

            <label for="IntroNarrative">About:</label>
            <textarea type="text" asp-for="Colleague!.IntroNarrative" placeholder="Introduce yourself..." style="height:200px"></textarea>
            <br />

            <legend><b>Skills:</b></legend>
            <label for="ProgLang">Programming Languages:</label>
            <div class="tags-input">
                <input type="text" asp-for="Skill!.ProgLang" placeholder="What languages do you know?... (Press enter to save)" />
                <ul class="tags-list"></ul>
            </div>

            <br />

            <label for="OS">Operating Systems:</label>
            <div class="tags-input">
                <input type="text" asp-for="Skill!.OS" placeholder="What operating systems do you know?... (Press enter to save)" />
                <ul class="tags-list"></ul>
            </div>
            <br />

            <label for="SoftAndFrame">Software & Frameworks:</label>
            <div class="tags-input">
                <input type="text" asp-for="Skill!.SoftAndFrame" placeholder="What softwares and frameworks do you know?... (Press enter to save)">
                <ul class="tags-list"></ul>
            </div>
            <br />


            <legend><b>Experience:</b></legend>

            <div id="experience-list">
                <form>
                    <label for="Employer">Company:</label>
                    <input type="text" asp-for="Work!.Employer">
                    <label for="JobTitle">Job Title:</label>
                    <input type="text" asp-for="Work!.JobTitle">
                    <label for="StartDate">Start Date:</label>
                    <input type="date" asp-for="Work!.StartDate">
                    <label for="EndDate">End Date:</label>
                    <input type="date" asp-for="Work!.EndDate">
                    <label for="present-checkbox">Present Employment:</label>
                    <input type="checkbox" id="present-checkbox">
                    <button type="button" onclick="addExperience()">Add Experience</button>
                </form>
                <ul id="experience-ul">
                </ul>
            </div>
            <br />
            <button onclick="removeLastExperience()">Remove Last Experience</button>

            <br />
            <br />

            <legend><b>Education/Certification:</b></legend>

            <label for="EduCert">Education:</label>
            <input type="text" asp-for="Education!.EduCert" placeholder="Ex. Master of Business Administration (M.B.A.)">
            <br />

            <label for="EduCert">Certification:</label>
            <input type="text" asp-for="Education!.EduCert" placeholder="Ex. Advanced Cyber Defender Certificate">
            <br />

            <label for="EduYear">Education Year:</label>
            <input type="text" asp-for="Education!.EduYear" placeholder="When did you get your education/certification?...">
            <br />


            <input type="submit" value="Submit" />
            <input type="submit" value="Save as Draft">
        </form>
    </div>
</body>


<!--Tag system script-->
<script>
    const tagsInput = document.querySelector('.tags-input');
    const tagsList = document.querySelector('.tags-list');
    const input = tagsInput.querySelector('input');

    let tags = [];

    function createTag(label) {
        const li = document.createElement('li');
        li.classList.add('tag');
        const span = document.createElement('span');
        span.innerText = label;
        const closeIcon = document.createElement('i');
        closeIcon.classList.add('material-icons');
        closeIcon.innerText = 'X';
        closeIcon.addEventListener('click', () => {
            removeTag(label);
        });
        li.appendChild(span);
        li.appendChild(closeIcon);
        return li;
    }

    function clearTags() {
        tagsList.querySelectorAll('.tag').forEach(tag => {
            tag.parentElement.removeChild(tag);
        });
    }

    function renderTags() {
        clearTags();
        tags.slice().reverse().forEach(tag => {
            const li = createTag(tag);
            tagsList.prepend(li);
        });
    }

    function addTag(tag) {
        tags.push(tag);
        renderTags();
    }

    function removeTag(tag) {
        const index = tags.indexOf(tag);
        if (index !== -1) {
            tags.splice(index, 1);
        }
        renderTags();
    }

    input.addEventListener('keyup', (e) => {
        if (e.key === 'Enter') {
            const tag = input.value.trim();
            if (tag) {
                addTag(tag);
                input.value = '';
            }
        }
    });

    input.addEventListener('input', () => {
        const lastChar = input.value.slice(-1);
        if (lastChar === ',' || lastChar === ' ') {
            const tag = input.value.slice(0, -1).trim();
            if (tag) {
                addTag(tag);
                input.value = '';
            }
        }
    });</script>

<!-- Configurable list script-->
<script>
    function addExperience() {
        var ul = document.querySelector("#experience-ul");
        var companyInput = document.querySelector("#company-input");
        var jobTitleInput = document.querySelector("#job-title-input");
        var startDateInput = document.querySelector("#start-date-input");
        var endDateInput = document.querySelector("#end-date-input");
        var presentCheckbox = document.querySelector("#present-checkbox");

        var li = document.createElement("li");
        var company = document.createElement("p");
        company.appendChild(document.createTextNode("Company: " + companyInput.value));
        li.appendChild(company);

        var jobTitle = document.createElement("p");
        jobTitle.appendChild(document.createTextNode("Job Title: " + jobTitleInput.value));
        li.appendChild(jobTitle);

        var startDate = document.createElement("p");
        startDate.appendChild(document.createTextNode("Start Date: " + startDateInput.value));
        li.appendChild(startDate);

        var endDate = document.createElement("p");
        if (presentCheckbox.checked) {
            endDate.appendChild(document.createTextNode("End Date: Present"));
        } else {
            endDate.appendChild(document.createTextNode("End Date: " + endDateInput.value));
        }
        li.appendChild(endDate);

        ul.appendChild(li);
        companyInput.value = "";
        jobTitleInput.value = "";
        startDateInput.value = "";
        endDateInput.value = "";
        presentCheckbox.checked = false;
    }

    function removeLastExperience() {
        var ul = document.querySelector("#experience-ul");
        var li = document.querySelector("#experience-ul li:last-child");
        ul.removeChild(li);
    }
</script>

<!--Stops page from being submitted upon pressing enter-->
<script>
    const form = document.getElementById("myForm");
    form.addEventListener("keypress", function (e) {
        if (e.key === "Enter") {
            e.preventDefault();
        }
    });
</script>
